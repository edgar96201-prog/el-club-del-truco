<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>El Club del Truco</title>
<style>
body {
  background:#0b3d2e;
  color:#fff;
  font-family:Georgia, serif;
  text-align:center;
  margin:0;
}
h1 { margin:15px 0; }
.mesa {
  background:#145a32;
  border:6px solid #4a2c16;
  border-radius:20px;
  margin:20px auto;
  padding:15px;
  max-width:900px;
}
.cartas {
  display:flex;
  justify-content:center;
  gap:12px;
  min-height:130px;
}
.carta {
  width:80px;
  height:120px;
  background:#fdf6e3;
  color:#000;
  border-radius:8px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
  cursor:pointer;
  flex-direction: column;
}
.carta span {
  font-size:22px;
}
.rival .carta {
  background:#999;
}
.botones button {
  margin:5px;
  padding:10px 15px;
  font-size:15px;
  border-radius:8px;
  border:none;
  cursor:pointer;
}
.log {
  background:#0e6655;
  padding:10px;
  border-radius:10px;
  min-height:60px;
  margin-top:10px;
}
</style>
</head>
<body>

<h1>üÉè El Club del Truco ‚Äì Hasta 30 puntos</h1>

<div class="mesa">

<h3>Puntaje</h3>
<p>Vos: <span id="pJugador">0</span> | Rival: <span id="pRival">0</span></p>

<h3>Rival</h3>
<div class="cartas rival" id="manoRival"></div>

<h3>Mesa</h3>
<div class="cartas" id="mesa"></div>

<h3>Tu mano</h3>
<div class="cartas" id="manoJugador"></div>

<div class="log" id="log"></div>

<div style="margin-top:10px;">
  <button onclick="mazo()">Mazo</button>
</div>

</div>

<script>
// ====== Datos ======
const mazo = [
  {n:'1',p:'Espada',v:14},{n:'1',p:'Basto',v:13},
  {n:'7',p:'Espada',v:12},{n:'7',p:'Oro',v:11},
  {n:'3',p:'Espada',v:10},{n:'2',p:'Espada',v:9},
  {n:'1',p:'Oro',v:8},{n:'12',p:'Copa',v:7},
  {n:'11',p:'Copa',v:6},{n:'10',p:'Copa',v:5},
  {n:'7',p:'Basto',v:4},{n:'6',p:'Oro',v:3},
  {n:'5',p:'Espada',v:2},{n:'4',p:'Basto',v:1}
];

const simbolos = {
  'Espada':'üó°Ô∏è',
  'Basto':'‚öæ',
  'Oro':'ü™ô',
  'Copa':'üç∑'
};

let manoJugador=[], manoRival=[];
let puntosJugador=0, puntosRival=0;
let turno='jugador';

// ====== DOM ======
const mj=document.getElementById('manoJugador');
const mr=document.getElementById('manoRival');
const mesaDiv=document.getElementById('mesa');
const logDiv=document.getElementById('log');
const pJ=document.getElementById('pJugador');
const pR=document.getElementById('pRival');

// ====== Funciones ======
function mezclar(arr){ return arr.sort(()=>Math.random()-0.5); }

function repartir(){
  mj.innerHTML=''; mr.innerHTML=''; mesaDiv.innerHTML='';
  turno='jugador';
  logDiv.innerText='Se repartieron las cartas';

  const cartas = mezclar([...mazo]);
  manoJugador = cartas.slice(0,3);
  manoRival = cartas.slice(3,6);

  manoJugador.forEach(c=>{
    const d=document.createElement('div');
    d.className='carta';
    d.innerHTML=`<span>${simbolos[c.p]}</span>${c.n}`;
    d.onclick=()=>jugar(c,d);
    mj.appendChild(d);
  });

  manoRival.forEach(()=>{
    const d=document.createElement('div');
    d.className='carta';
    d.innerHTML='üÇ†';
    mr.appendChild(d);
  });
}

function jugar(carta,div){
  if(turno!=='jugador') return;
  turno='rival';
  mj.removeChild(div);
  mesaDiv.innerHTML='';

  const cRival = manoRival.pop();
  mr.removeChild(mr.firstChild);

  const dJ=document.createElement('div');
  dJ.className='carta';
  dJ.innerHTML=`<span>${simbolos[carta.p]}</span>${carta.n}`;

  const dR=document.createElement('div');
  dR.className='carta';
  dR.innerHTML=`<span>${simbolos[cRival.p]}</span>${cRival.n}`;

  mesaDiv.appendChild(dJ);
  mesaDiv.appendChild(dR);

  setTimeout(()=>{ evaluarMano(carta,cRival); },500);
}

function evaluarMano(cJ, cR){
  if(cJ.v > cR.v){ 
    puntosJugador++;
    logDiv.innerText="Ganaste la mano"; 
  } else if(cR.v > cJ.v){
    puntosRival++;
    logDiv.innerText="Gan√≥ el rival"; 
  } else {
    logDiv.innerText="Mano parda";
  }

  pJ.innerText=puntosJugador;
  pR.innerText=puntosRival;

  setTimeout(()=>{ 
    if(puntosJugador>=30){ logDiv.innerText="¬°GANASTE EL JUEGO!"; reiniciar(); }
    else if(puntosRival>=30){ logDiv.innerText="¬°EL RIVAL GANA!"; reiniciar(); }
    else { repartir(); }
  },1000);
}

function reiniciar(){
  puntosJugador=0; puntosRival=0;
  pJ.innerText=0; pR.innerText=0;
  repartir();
}

function mazo(){
  logDiv.innerText='Te fuiste al mazo';
  repartir();
}

// ====== Inicio ======
repartir();
</script>

</body>
</html>
